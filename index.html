<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¼±é›»ç¶­ä¿®å ±ä¿®ç³»çµ±</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; }
        .repair-card { max-width: 600px; margin: 50px auto; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .card-header { background-color: #1d3557; color: white; border-radius: 15px 15px 0 0 !important; }
        .btn-primary { background-color: #457b9d; border: none; }
        .btn-primary:hover { background-color: #1d3557; }
    </style>
</head>
<body>

<div class="container">
    <div class="card repair-card">
        <div class="card-header text-center py-3">
            <h3>ğŸ› ï¸ å¼±é›»ç¶­ä¿®åœ¨ç·šå ±ä¿®</h3>
        </div>
        <div class="card-body p-4">
            <form id="repairForm">
                <div class="mb-3">
                    <label class="form-label">å®¢æˆ¶å§“å</label>
                    <input type="text" class="form-control" id="customer_name" placeholder="è«‹è¼¸å…¥è¯çµ¡äººå§“å" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">è¯çµ¡é›»è©±</label>
                    <input type="tel" class="form-control" id="phone" placeholder="ä¾‹å¦‚ï¼š0912345678" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">ç¶­ä¿®åœ°å€</label>
                    <input type="text" class="form-control" id="address" placeholder="è«‹è¼¸å…¥å®Œæ•´åœ°å€" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">å ±ä¿®é …ç›®</label>
                    <select class="form-select" id="issue_type">
                        <option value="ç›£è¦–å™¨ç³»çµ±">ç›£è¦–å™¨ç³»çµ±</option>
                        <option value="é›»è©±ç¸½æ©Ÿ">é›»è©±ç¸½æ©Ÿ</option>
                        <option value="é–€ç¦å°è¬›">é–€ç¦å°è¬›</option>
                        <option value="ç¶²è·¯æ¶æ§‹">ç¶²è·¯æ¶æ§‹</option>
                        <option value="å…¶ä»–">å…¶ä»–</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">æ•…éšœæè¿°</label>
                    <textarea class="form-control" id="description" rows="3" placeholder="è«‹ç°¡å–®æè¿°æ•…éšœç‹€æ³"></textarea>
                </div>
                <button type="submit" class="btn btn-primary w-100 py-2">é€å‡ºå ±ä¿®å–®</button>
            </form>
        </div>
    </div>
</div>

<script>
    document.getElementById('repairForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        // 1. å–å¾—è¡¨å–®å…§å®¹
        const formData = {
            customer_name: document.getElementById('customer_name').value,
            phone: document.getElementById('phone').value,
            address: document.getElementById('address').value,
            issue_type: document.getElementById('issue_type').value,
            description: document.getElementById('description').value
        };

        // 2. å‘¼å«æ‚¨çš„ FastAPI å¾Œç«¯ (æ³¨æ„ï¼šè‹¥åœ¨åŒä¸€å°é›»è…¦æ¸¬è©¦ç”¨ 127.0.0.1)
        try {
            // å°‡åŸæœ¬çš„ 127.0.0.1 æ›æˆ Render çµ¦æ‚¨çš„ç¶²å€
const response = await fetch('https://my-line-bot-d0cc.onrender.com/submit_repair', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(formData)
});

            if (response.ok) {
                alert('âœ… å ±ä¿®æˆåŠŸï¼å¸«å‚…å°‡ç›¡å¿«èˆ‡æ‚¨è¯ç¹«ã€‚');
                document.getElementById('repairForm').reset();
            } else {
                alert('âŒ å ±ä¿®å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚');
            }
        } catch (error) {
            console.error('Error:', error);
            alert('âŒ ç„¡æ³•é€£ç·šè‡³ä¼ºæœå™¨');
        }
    });
</script>

</body>
</html>